@{
    ViewBag.Title = "Register";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<link rel="stylesheet" href="~/assets/CSS/Login_Register/index.css" />

<!-- Breadcrumb -->
<div class="container py-4 px-4 bg-white my-3 rounded-3">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb small text-muted m-0">
            <li class="breadcrumb-item"><a href="/">Trang Chủ</a></li>
            <li class="breadcrumb-item"><a href="/pages">Pages</a></li>
            <li class="breadcrumb-item active text-secondary" aria-current="page">Đăng Ký</li>
        </ol>
    </nav>
</div>

<!-- Main Content -->
<div class="container py-5 bg-white rounded-3 mb-3">
    <div class="row align-items-center justify-content-center gx-5">
        <!-- Left Side - Illustration -->
        <div class="col-md-6 mb-4 mb-md-0">
            <img src="https://ui-themez.smartinnovates.net/items/swoo_html/inner_pages/assets/img/login.svg" alt="Login illustration" class="img-fluid" />
        </div>

        <!-- Right Side - Login Form -->
        <div class="col-md-6 col-lg-5">
            <h1 class="text-success-custom fw-bold mb-2">Đăng Ký</h1>
            <p class="text-uppercase text-muted small mb-4">Tham gia cùng chúng tôi</p>

            <form onsubmit="handleLogin(event)">
                <div class="mb-3">
                    <label for="name" class="form-label">Nhập tên của bạn</label>
                    <input type="text" class="form-control" id="name" placeholder="Anine" required />
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Địa chỉ Email</label>
                    <input type="email" class="form-control" id="email" placeholder="example@gmail.com" required />
                </div>

                <div class="mb-3">
                    <label for="password" class="form-label">Mật khẩu</label>
                    <div class="password-wrapper">
                        <input type="password"
                               class="form-control"
                               id="password"
                               placeholder="••••••••"
                               required
                               minlength="8"
                               maxlength="20"
                               pattern="^(?=.*[a-z])(?=.*\d)(?=.*[\W_]).{8,20}$"
                               title="Mật khẩu phải từ 8–20 ký tự, có ít nhất 1 chữ thường, 1 số và 1 ký tự đặc biệt"
                               oninput="checkPasswordStrength()" />
                        <button type="button" onclick="togglePassword(this)" id="togglePasswordBtn">
                            <i class="fa-solid fa-eye"></i>
                        </button>
                    </div>
                    <div class="strength-meter" id="strengthMeter">
                        <span></span>
                    </div>
                    <div id="password-strength-text" style="margin-top: 10px;"></div> <!-- Hiển thị độ mạnh -->
                </div>
                <div class="mb-3">
                    <label for="password" class="form-label">Xác nhận lại mật khẩu</label>
                    <d iv class="input-group">
                        <input type="password" class="form-control" id="password" placeholder="••••••••" required />
                        <button class="btn btn-outline-secondary" type="button" onclick="togglePassword()">
                            <span id="toggleIcon">👁️</span>
                        </button>
                </div>
                <div class="text-end mt-1">
                    <a href="/forgot-password" class="small text-muted">Quên mật khẩu ?</a>
                </div>

                <button type="submit" class="btn btn-success-custom w-100 mb-3">ĐĂNG KÝ</button>

                <div class="text-center small">
                    <span class="text-muted">ĐÃ CÓ TÀI KHOẢN ? </span>
                    <a href="/signup" class="text-success-custom fw-medium">ĐĂNG NHẬP</a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>

    // Hàm kiểm tra độ mạnh mật khẩu

    function checkPasswordStrength() {
        const password = document.getElementById('password').value;
        const meter = document.getElementById('strengthMeter');
        const meterSpan = meter.querySelector('span');
        const strengthText = document.getElementById('password-strength-text');

        // Nếu mật khẩu rỗng, không làm gì (ẩn thanh độ mạnh và văn bản)
        if (password === "") {
            meterSpan.className = '';
            meterSpan.style.width = '0%';
            strengthText.textContent = '';
            return;
        }

        // Kiểm tra độ mạnh mật khẩu
        let strength = 0;

        if (password.length >= 8) strength += 1;
        if (/[A-Z]/.test(password)) strength += 1;
        if (/[a-z]/.test(password)) strength += 1;
        if (/\d/.test(password)) strength += 1;
        if (/[\W_]/.test(password)) strength += 1;

        // Cập nhật thanh độ mạnh và văn bản mô tả độ mạnh
        if (strength <= 2) {
            meterSpan.className = 'weak';
            meterSpan.style.width = '33%';
            strengthText.textContent = 'Yếu';
            strengthText.style.color = 'red';
        } else if (strength === 3 || strength === 4) {
            meterSpan.className = 'medium';
            meterSpan.style.width = '66%';
            strengthText.textContent = 'Trung bình';
            strengthText.style.color = 'orange';
        } else if (strength === 5) {
            meterSpan.className = 'strong';
            meterSpan.style.width = '100%';
            strengthText.textContent = 'Mạnh';
            strengthText.style.color = 'green';
        }
    }
</script>